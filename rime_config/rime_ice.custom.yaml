patch:
  # 候选词翻页键配置
  key_binder:
    # 以词定字快捷键配置（select_character.lua 需要）
    select_first_character: "bracketleft"   # 左中括号 [ 选首字
    select_last_character: "bracketright"   # 右中括号 ] 选末字
    bindings+:
      - { when: has_menu, accept: comma, send: Page_Up }      # , 上一页候选词
      - { when: has_menu, accept: period, send: Page_Down }   # . 下一页候选词

  # 启用学习新词功能（正确的配置方式）
  'translator/enable_user_dict': true        # 启用用户词典（自动学习新词）
  'translator/enable_sentence': true         # 启用句子输入（整句记忆）
  'translator/enable_completion': true       # 启用补全功能
  'translator/enable_encoder': true          # 启用编码器

  # AI 聊天功能
  # 使用方式：@ai 输入 或 ai:输入
  recognizer:
    patterns:
      ai_cmd: "^(@ai|ai:|chat:|tr:)"  # 匹配 @ai 或 ai: 开头的输入（包括单独的 @ai 和 ai:）

  # engine/processors/@0: 
    # AI Processor：这里这样处理没用，必须写到rime_ice.schema.yaml中
    # - lua_processor@*ai_processor
  engine/translators/+:
    - lua_translator@*ai_translator
  engine/filters/+:
    - lua_filter@*ai_filter
    # 用户词典标记：在用户词典中的候选项后添加星号标记
    - lua_filter@*is_in_user_dict
  is_in_user_dict: true  # true = 为用户词典中的词加星号，false = 为不在用户词典中的词加星号
